<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For You</title>
    
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Dancing+Script:wght@600&family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@400;700&display=swap');
        
        body { 
            font-family: 'Playfair Display', serif; 
            margin: 0;
            padding: 0;
            background-color: #000; /* Default background if scripts fail */
        }

        .cursive { font-family: 'Dancing Script', cursive; }
        .sans { font-family: 'Poppins', sans-serif; } 
        
        @keyframes fall {
            0% { transform: translateY(-10vh) rotate(0deg); }
            100% { transform: translateY(110vh) rotate(360deg); }
        }
        .animate-fall { animation: fall 5s linear forwards; }

        .bg-main { 
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://i.pinimg.com/736x/05/f3/11/05f311d010eb473c544629b73ec952e7.jpg');
            background-size: cover; 
            background-position: center;
            min-height: 100vh;
        }

        .bg-vintage { 
            background: linear-gradient(rgba(0,0,0,0.4), rgba(0,0,0,0.4)), url('https://i.pinimg.com/736x/bb/48/8e/bb488e9cf0a1fa312156666024119b7d.jpg');
            background-size: cover; 
            background-position: center;
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root">
        <div style="color: white; text-align: center; padding-top: 50px;">
            Loading your surprise... (If this stays black, check your internet connection)
        </div>
    </div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        function App() {
            const FORMSPREE_ID = "xlgdqnae"; 
            const MUSIC_URL = "https://cdn.pixabay.com/audio/2022/02/22/audio_d0c6ff1bad.mp3";

            const [page, setPage] = useState(1);
            const [hearts, setHearts] = useState([]);
            const [noBtnPos, setNoBtnPos] = useState({ position: 'static' });
            const [isPlaying, setIsPlaying] = useState(false);
            const audioRef = useRef(null);

            useEffect(() => {
                const interval = setInterval(() => {
                    const id = Date.now();
                    setHearts(prev => [...prev, { id, left: Math.random() * 100 }]);
                    setTimeout(() => setHearts(prev => prev.filter(h => h.id !== id)), 5000);
                }, 600);
                return () => clearInterval(interval);
            }, []);

            useEffect(() => { 
                if (window.lucide) window.lucide.createIcons(); 
            }, [page, isPlaying]);

            const teleportButton = () => {
                const randomX = Math.floor(Math.random() * 70) + 10;
                const randomY = Math.floor(Math.random() * 70) + 10;
                setNoBtnPos({ 
                    position: 'fixed', 
                    left: randomX + "%", 
                    top: randomY + "%", 
                    zIndex: 999 
                });
            };

            const handleStart = () => {
                if (audioRef.current) {
                    audioRef.current.play().catch(e => console.log("Audio block", e));
                    setIsPlaying(true);
                }
                setPage(2); 
            };

            const toggleMusic = () => {
                if (audioRef.current) {
                    if (isPlaying) { audioRef.current.pause(); } 
                    else { audioRef.current.play(); }
                    setIsPlaying(!isPlaying);
                }
            };

            return (
                <div className={page === 3 ? "bg-vintage min-h-screen text-slate-800" : "bg-main min-h-screen text-white"}>
                    <audio ref={audioRef} loop src={MUSIC_URL} />
                    
                    {hearts.map(h => (
                        <span key={h.id} className="absolute top-[-10%] animate-fall text-2xl pointer-events-none" style={{left: h.left + "%"}}>‚ù§Ô∏è</span>
                    ))}

                    <button onClick={toggleMusic} className="fixed top-4 right-4 z-50 p-2 bg-white/20 rounded-full backdrop-blur-md border border-white/30">
                        {isPlaying ? <i data-lucide="volume-2"></i> : <i data-lucide="volume-x"></i>}
                    </button>

                    {page === 1 && (
                        <div className="h-screen flex flex-col items-center justify-center text-center p-6">
                            <h1 className="text-5xl font-bold mb-6">Happy Birthday Angad bbyy!</h1>
                            <p className="text-xl italic mb-10 text-rose-100">I have a secret for you...</p>
                            <button onClick={handleStart} className="sans bg-rose-500 text-white px-12 py-5 rounded-full font-bold shadow-2xl">
                                Open Now üéÅ
                            </button>
                        </div>
                    )}

                    {page === 2 && (
                        <div className="h-screen flex flex-col items-center justify-center text-center p-4 relative">
                            <h2 className="text-4xl font-bold mb-16 px-4">Will you be mine, forever??</h2>
                            <div className="flex flex-col md:flex-row gap-8 items-center justify-center w-full">
                                <button onClick={() => setPage(3)} className="sans z-10 w-48 bg-green-500 text-white py-4 rounded-xl font-bold text-2xl shadow-xl">
                                    YES
                                </button>
                                <button onMouseEnter={teleportButton} onTouchStart={teleportButton} style={noBtnPos} className="sans w-48 bg-gray-400/80 text-white py-4 rounded-xl font-bold text-2xl">
                                    No
                                </button>
                            </div>
                        </div>
                    )}

                    {page === 3 && (
                        <div className="h-screen flex flex-col items-center justify-center p-6">
                            <div className="max-w-xl w-full bg-white p-10 shadow-2xl relative border-l-[12px] border-rose-200 text-slate-800">
                                <h2 className="cursive text-4xl text-rose-800 mb-6">betuu!,</h2>
                                <p className="text-2xl leading-relaxed italic">
                                    Every day with you is my favorite day. I'm so lucky to have you in my life. You make everything brighter.
                                </p>
                                <p className="mt-12 text-right cursive text-3xl">‚Äî Apki Boss Lady! &lt;3</p>
                            </div>
                            <button onClick={() => setPage(4)} className="sans mt-10 text-rose-200 font-bold underline text-lg">Click for one last thing</button>
                        </div>
                    )}

                    {page === 4 && (
                        <div className="h-screen flex items-center justify-center p-6 bg-rose-50 text-slate-800">
                            <div className="bg-white p-10 rounded-3xl shadow-2xl max-w-md w-full text-center">
                                <h3 className="text-3xl font-bold mb-4 text-rose-600">Write to me</h3>
                                <form action={"https://formspree.io/f/" + FORMSPREE_ID} method="POST" className="space-y-6">
                                    <textarea name="message" required className="sans w-full h-40 p-4 bg-slate-50 rounded-2xl border-2 border-rose-100 outline-none focus:border-rose-400" placeholder="Type here..."></textarea>
                                    <button type="submit" className="sans w-full bg-rose-500 text-white py-5 rounded-2xl font-bold text-xl shadow-lg">Send Message ‚ù§Ô∏è</button>
                                </form>
                            </div>
                        </div>
                    )}
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>